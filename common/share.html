<!-- 角色选择 -->
<div class="roleSelection hide">
    <div href="javascript:;" class="close layui-layer-close"><i class="iconfont">&#xe60d;</i></div>
    <div class="choice">
        <div>
            <img src="../images/icon5.png" alt="">
            <h1>我是猎头</h1>
            <h2>看职位 推荐人选</h2>
            <a href="http://39.96.49.139/outside/index/frontPage.jsp">去做单</a>
        </div>
        <div>
            <img src="../images/icon6.png" alt="">
            <h1>我是求职者</h1>
            <h2>看机会 找工作</h2>
            <a href="求职者注册.html">投职位</a>
        </div>
    </div>
</div>
<!-- 找回密码 -->
<div class="getPass hide">
    <div class="title">
        <h1>找回密码</h1>
        <div class="close layui-layer-close"><i class="iconfont">&#xe60d;</i></div>
    </div>
    <div class="content">
        <div class="pageBtn">
            <a class="active a1" href="javascript:;">验证</a>
            <a class="a2" href="javascript:;">设置新密码</a>
        </div>
        <div class="inputBox yzPass">
            <p>
                <label for="">
                        <input class="phone forgetPhone" type="text" placeholder="请输入手机号" maxlength="11" ng-model='phone'>
                </label>
            </p>
            <p>
                <label for="" class="vCodeBox">
                        <input class="vCode" type="text" placeholder="验证码" maxlength="6">
                </label>
                <canvas id="canvas" width="100" height="43"></canvas>
            </p>
            <p>
                <label for="">
                    <input class="phoneCode" type="text" placeholder="请输入手机验证码" maxlength="6"><strong class="phoneCodeBtn phoneCodeBtnlist">获取验证码</strong>
                    <!-- <span>输入错误</span> -->
                </label>
            </p>
            <div class="btn btnlist">
                <button>下一步</button>
            </div>
        </div>
        <div class="inputBox newPass hide">
            <p>
                <label for="">
                    <input class="pass" type="password" placeholder="请输入新密码">
                </label>
            </p>
            <p>
                <label for="">
                    <input class="pass1" type="password" placeholder="请确认新密码">
                </label>
            </p>
            4
            <div class="btn btnlist">
                <button>完成</button>
            </div>
        </div>
    </div>
</div>
<!-- 登录弹窗 -->
<div class="lay-sign hide">
    <div class="flexBlock">
        <div class="ewm">
            <img src="../images/weweima_.png" alt="">
            <h1>关注商壤公众号</h1>
            <h1>更多行业资讯、职位动态为您呈现</h1>
        </div>
        <div class="loginAlert" style="display:block">
            <h1>
                <a href="javascript:;">猎头登录</a>
                <a class="active" href="javascript:;">求职者登录</a>
                <a href="javascript:;">员工登录</a>
            </h1>
            <div class="box hide">
                <h2>
                    <a class="active" href="javascript:;">个人猎头</a><a href="javascript:;">企业猎头</a>
                </h2>
                <!-- 个人猎头 -->
                <div class="inputBox iHeadhunter">
                    <form id="loginform3" name="loginform" action="http://39.96.49.139/authenticate" method="post">
                        <p>
                            <input class="phone pre-user-id" name="username" type="text" placeholder="请输入手机号/帐号">
                            <span class="error"></span>
                        </p>
                        <p>
                            <input class="pass pre-user-pass" name="password" type="password" placeholder="请输入密码">
                            <span class="error"></span>
                        </p>
                        <div class="rememberForget">
                            <div class="remember">
                                <input type="checkbox" id="remember3"><label class="label1" for="remember3"></label>记住密码
                            </div>
                            <div class="forget">
                                忘记密码？
                            </div>
                        </div>
                        <div class="btn">
                            <input type="button" value="个人猎头登录" onclick="check(this.form)">
                        <!--  <a class="per-login" onclick="check(this.form)" >个人猎头登录</a> onclick="document:loginform.submit()" -->
                        </div>
                        <div class="register">
                            没有帐号？<a href="http://39.96.49.139/outside/index/frontPage.jsp">立即注册</a>
                        </div>
                    </form>
                </div>
                <!-- 企业猎头 -->
                <div class="inputBox headhunter hide">
                    <form id="loginform4" name="loginform" action="http://39.96.49.139/authenticate" method="post">
                        <p>
                            <input class="phone" type="text" name="username" placeholder="请输入手机号/帐号">
                            <span class="error"></span>
                        </p>
                        <p>
                            <input class="pass" type="password" name="password" placeholder="请输入密码">
                            <span class="error"></span>
                        </p>
                        <div class="rememberForget">
                            <div class="remember">
                                <input type="checkbox" id="remember4"><label class="label1" for="remember4"></label>记住密码
                            </div>
                            <div class="forget">
                                忘记密码？
                            </div>
                        </div>
                        <div class="btn">
                            <input type="button" value="个人猎头登录" onclick="check(this.form)">
                        <!--  <a class="per-login" onclick="check(this.form)" >个人猎头登录</a> onclick="document:loginform.submit()" -->
                        </div>
                        <div class="register">
                            没有帐号？<a href="http://39.96.49.139/outside/index/frontPage.jsp">立即注册</a>
                        </div>
                    </form>
                </div>
            </div>
            <div class="box">
                <!-- 求职者登录 -->
                <div class="inputBox seekerLogin">
                        <form id="loginform5" name="loginform" action="/api/authentication/form" method="post" enctype="multipart/form-data" target="form">
                        <p>
                            <input class="phone" type="text" name="username" placeholder="请输入手机号/帐号">
                            <span class="error"></span>
                        </p>
                        <p>
                            <input class="pass" type="password" name="password" placeholder="请输入密码">
                            <span class="error"></span>
                        </p>
                        <div class="rememberForget">
                            <div class="remember">
                                <input type="checkbox" id="remember5"><label class="label1" for="remember5"></label>记住密码
                            </div>
                            <div class="forget">
                                忘记密码？
                            </div>
                        </div>
                        <div class="btn">
                            <input type="button" value="求职者登录" onclick="check(this.form)">
                        </div>
                        <div class="register">
                            没有帐号？<a href="求职者注册.html">立即注册</a>
                        </div>
                        <iframe name="form" id="form" style="display:none;" frameborder="0"></iframe>
                    </form>
                </div>
            </div>
            <div class="box hide">
                <!-- 员工登录 -->
                <div class="inputBox employeeLogin">
                    <p>
                        <input class="phone" type="text" name="username" placeholder="请输入手机号/帐号">
                        <span class="error"></span>
                    </p>
                    <p>
                        <input class="pass" type="password" name="password" placeholder="请输入密码">
                        <span class="error"></span>
                    </p>
                    <div class="rememberForget">
                        <div class="remember">
                            <input type="checkbox" id="remember6"><label class="label1" for="remember6"></label>记住密码
                        </div>
                        <div class="forget">
                            忘记密码？
                        </div>
                    </div>
                    <div class="btn">
                        <input type="button" value="员工登录">
                    </div>
                    <div class="register">
                        没有帐号？<a href="javascript:;">立即注册</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(".yzPass .phoneCodeBtnlist").click(function(){
        // var b='1111'
    //   console.log("111111")
        var telphone=$('.forgetPhone').val()
        // console.log(telphone)
        $.ajax({
            type: "GET",  
             url: "/api/send/getPassword",
             data: {phone:telphone},  
             dataType: "json",  
             success: function(data){  
                 alert('发送请求成功')
            }, 
             error:function(e){ 
                 alert('发送请求失败')
            }  
        })
    });
    $(".yzPass .btnlist button").click(function(){
        
        var phoneCode=$('.phoneCode').val()
        var telphone=$('.forgetPhone').val()
         $.ajax({
            type: "GET",  
             url: "/api/userInfo/getPassWord?code="+phoneCode+'&phone='+telphone,
             dataType: "json",  
             success: function(data){  
               var e=data
               console.log(e)
               if(data.code!=-1){
                $('.yzPass').css('display', 'none');
                $('.newPass').css('display', 'block');
                $('.pageBtn .a1').removeClass('active')
                $('.pageBtn .a2').addClass('active')
               }else{
                   alert(data.message)
               }
                
            }, 
             error:function(e){  
                 
            }  
        })
       
    });
    $(".newPass .btnlist button").click(function(){
        var pass=$('.newPass .pass').val()
        var pass1=$('.newPass .pass1').val()
        if(pass == pass1){
            $.ajax({
                type: "GET",  
                url: "/userInfo/updataUserPassword",
                data: {newPassword:pass,newPassword2:pass1},  
                dataType: "json",  
                success: function(data){  
                    console.log('發送成功')
                }, 
                error:function(e){  
                    console.log('發送失敗')
                }  
            }) 
        }else{
            alert("兩次密碼不一致")
        }
       
    });
    
    layui.use(['layer','element'], function(){  //弹出登录
        var layer = layui.layer;
        // layer.open({     
        //     type: 1,
        //     title: false,
        //     closeBtn: 0,
        //     shadeClose: true,
        //     skin: '',
        //     area: 'auto',
        //     maxWidth :"auto",
        //     maxHeight : "auto",
        //     resize : false,
        //     content: $(".lay-sign"),
        // });
    })

    // 复制代码
// var nums = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0", 
//     'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 
//     'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'
// ];
// var str = '';
// var verVal = drawCode();
// // 绘制验证码
// function drawCode (str) {
//     var canvas = document.getElementById("verifyCanvas"); //获取HTML端画布
//     var context = canvas.getContext("2d"); //获取画布2D上下文
//     context.fillStyle = "cornflowerblue"; //画布填充色
//     context.fillRect(0, 0, canvas.width, canvas.height); //清空画布
//     context.fillStyle = "white"; //设置字体颜色
//     context.font = "25px Arial"; //设置字体
//     var rand = new Array();
//     var x = new Array();
//     var y = new Array();
//     for (var i = 0; i < 4; i++) {
//         rand.push(rand[i]);
//         rand[i] = nums[Math.floor(Math.random() * nums.length)]
//         x[i] = i * 20 + 10;
//         y[i] = Math.random() * 20 + 20;
//         context.fillText(rand[i], x[i], y[i]);
//     }
//     str = rand.join('').toUpperCase();
//     //画3条随机线
//     for (var i = 0; i < 3; i++) {
//         drawline(canvas, context);
//     }

//     // 画30个随机点
//     for (var i = 0; i < 30; i++) {
//         drawDot(canvas, context);
//     }
//     convertCanvasToImage(canvas);
//     return str;
// }

// // 随机线
// function drawline (canvas, context) {
//     context.moveTo(Math.floor(Math.random() * canvas.width), Math.floor(Math.random() * canvas.height)); //随机线的起点x坐标是画布x坐标0位置，y坐标是画布高度的随机数
//     context.lineTo(Math.floor(Math.random() * canvas.width), Math.floor(Math.random() * canvas.height)); //随机线的终点x坐标是画布宽度，y坐标是画布高度的随机数
//     context.lineWidth = 0.5; //随机线宽
//     context.strokeStyle = 'rgba(50,50,50,0.3)'; //随机线描边属性
//     context.stroke(); //描边，即起点描到终点
// }
// // 随机点(所谓画点其实就是画1px像素的线，方法不再赘述)
// function drawDot (canvas, context) {
//     var px = Math.floor(Math.random() * canvas.width);
//     var py = Math.floor(Math.random() * canvas.height);
//     context.moveTo(px, py);
//     context.lineTo(px + 1, py + 1);
//     context.lineWidth = 0.2;
//     context.stroke();

// }
// // 绘制图片
// function convertCanvasToImage (canvas) {
//     document.getElementById("verifyCanvas").style.display = "none";
//     var image = document.getElementById("code_img");
//     image.src = canvas.toDataURL("image/png");
//     return image;
// }

// // 点击图片刷新
// document.getElementById('code_img').onclick = function() {
//     resetCode();
// }

// function resetCode () {
//     $('#verifyCanvas').remove();
//     $('#code_img').before('<canvas width="100" height="40" id="verifyCanvas"></canvas>')
//     verVal = drawCode();
// }
</script>